{"name":"graphitePing","type":"virtual_device","properties":{"deviceIcon":0,"categories":"[\"other\"]","currentIcon":"0","log":"","logTemp":"","mainLoop":"--statusPiec = fibaro:getGlobal(\"Piec\");\n\nlocal device = fibaro:getSelfId();\nlocal ipaddress = fibaro:getValue(device, \"IPAddress\");\nlocal port = fibaro:getValue(device, \"TCPPort\");\nlocal socket = Net.FTcpSocket(ipaddress, port); \nsocket:setReadTimeout(500);\n\nHandleError = function (errorCode)\n  \tif (errorCode ~= 0)\n    \tthen\n\t\tfibaro:call(123, \"sendDefinedPushNotification\", \"21\");\n    end\nend\n\nDebug = function ( color, message )\n  fibaro:debug(string.format('<%s style=\"color:%s;\">%s', \"span\", color, message))\nend\n\n\nlocal host, port = ipaddress, port\n\nsocket:connect(host, port);\nlocal bytes, errorCode = socket:write(\"hello world\\n\");\nfibaro:debug(errorCode)\nHandleError(errorCode)\nfibaro:sleep(120000)","ui.Label1.value":"","visible":"true","rows":[{"type":"label","elements":[{"id":1,"lua":false,"waitForResponse":false,"caption":"Label 1","name":"Label1","favourite":false,"main":false}]}]},"actions":{"pressButton":1,"setSlider":2,"setProperty":2}}